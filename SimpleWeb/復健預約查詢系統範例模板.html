<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é ç´„æŸ¥è©¢ç³»çµ±</title>
    <!-- Bootstrap 4.6 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f5f5f5;
            padding: 20px;
        }
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .page-title {
            color: #2c3e50;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
        }
        .search-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        .status-badge {
            font-size: 0.85rem;
            padding: 5px 12px;
        }
        .status-pending {
            background-color: #ffc107;
            color: #000;
        }
        .status-completed {
            background-color: #28a745;
            color: #fff;
        }
        .status-cancelled {
            background-color: #dc3545;
            color: #fff;
        }
        .table-container {
            overflow-x: auto;
        }
        .btn-search {
            padding: 8px 30px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <h2 class="page-title">é–€è¨ºé ç´„æŸ¥è©¢ç³»çµ±</h2>
        
        <!-- æœå°‹å€å¡Š -->
        <div class="search-section">
            <form id="searchForm">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="startDate">é–‹å§‹æ—¥æœŸ</label>
                        <input type="date" class="form-control" id="startDate" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="endDate">çµæŸæ—¥æœŸ</label>
                        <input type="date" class="form-control" id="endDate" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="chartNo">ç—…æ­·è™Ÿ</label>
                        <input type="text" class="form-control" id="chartNo" placeholder="è«‹è¼¸å…¥ç—…æ­·è™Ÿ">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 text-right">
                        <button type="submit" class="btn btn-primary btn-search">
                            <i class="mr-1">ğŸ”</i> æŸ¥è©¢
                        </button>
                        <button type="button" class="btn btn-secondary ml-2" onclick="resetForm()">
                            é‡ç½®
                        </button>
                        <button type="button" class="btn btn-success ml-2" onclick="addAppointment()">
                            <i class="mr-1">â•</i> æ–°å¢é ç´„
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <!-- é ç´„æ¸…å–® -->
        <div class="table-container">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="mb-0">é ç´„æ¸…å–®</h5>
                <div>
                    <select id="batchStatus" class="form-control d-inline-block" style="width: auto;">
                        <option value="">è«‹é¸æ“‡ç‹€æ…‹</option>
                        <option value="pending">æœªçœ‹è¨º</option>
                        <option value="completed">å®Œæˆçœ‹è¨º</option>
                        <option value="cancelled">å–æ¶ˆ</option>
                    </select>
                    <button type="button" class="btn btn-warning ml-2" onclick="batchUpdate()">
                        <i class="mr-1">ğŸ”„</i> æ‰¹æ¬¡æ›´æ–°
                    </button>
                </div>
            </div>
            <table class="table table-hover table-bordered">
                <thead class="thead-light">
                    <tr>
                        <th style="width: 5%;">
                            <input type="checkbox" id="selectAll" onchange="toggleSelectAll(this)">
                        </th>
                        <th style="width: 8%;">åºè™Ÿ</th>
                        <th style="width: 15%;">ç—…æ­·è™Ÿ</th>
                        <th style="width: 17%;">å§“å</th>
                        <th style="width: 18%;">é ç´„æ™‚é–“</th>
                        <th style="width: 15%;">ç‹€æ…‹</th>
                        <th style="width: 22%;">å‚™è¨»</th>
                    </tr>
                </thead>
                <tbody id="appointmentList">
                    <!-- ç¯„ä¾‹è³‡æ–™ -->
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="pending"></td>
                        <td>1</td>
                        <td>A123456</td>
                        <td>ç‹å°æ˜</td>
                        <td>2025-11-13 09:00</td>
                        <td><span class="badge status-badge status-pending">æœªçœ‹è¨º</span></td>
                        <td>åˆè¨º</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="completed"></td>
                        <td>2</td>
                        <td>B789012</td>
                        <td>æå°è¯</td>
                        <td>2025-11-13 09:30</td>
                        <td><span class="badge status-badge status-completed">å®Œæˆçœ‹è¨º</span></td>
                        <td>è¤‡è¨º</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="pending"></td>
                        <td>3</td>
                        <td>C345678</td>
                        <td>å¼µå°è‹±</td>
                        <td>2025-11-13 10:00</td>
                        <td><span class="badge status-badge status-pending">æœªçœ‹è¨º</span></td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="cancelled"></td>
                        <td>4</td>
                        <td>D901234</td>
                        <td>é™³å°å¼·</td>
                        <td>2025-11-13 10:30</td>
                        <td><span class="badge status-badge status-cancelled">å–æ¶ˆ</span></td>
                        <td>æ‚£è€…å–æ¶ˆ</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="pending"></td>
                        <td>5</td>
                        <td>E567890</td>
                        <td>æ—å°èŠ³</td>
                        <td>2025-11-13 11:00</td>
                        <td><span class="badge status-badge status-pending">æœªçœ‹è¨º</span></td>
                        <td>è¤‡è¨º</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="completed"></td>
                        <td>6</td>
                        <td>F123789</td>
                        <td>é»ƒå°é¾</td>
                        <td>2025-11-13 11:30</td>
                        <td><span class="badge status-badge status-completed">å®Œæˆçœ‹è¨º</span></td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="pending"></td>
                        <td>7</td>
                        <td>G456123</td>
                        <td>å³å°ç¾</td>
                        <td>2025-11-13 14:00</td>
                        <td><span class="badge status-badge status-pending">æœªçœ‹è¨º</span></td>
                        <td>åˆè¨º</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="row-checkbox" data-status="cancelled"></td>
                        <td>8</td>
                        <td>H789456</td>
                        <td>å‘¨å°å‚‘</td>
                        <td>2025-11-13 14:30</td>
                        <td><span class="badge status-badge status-cancelled">å–æ¶ˆ</span></td>
                        <td>æ”¹ç´„å…¶ä»–æ™‚é–“</td>
                    </tr>
                </tbody>
            </table>
            <div class="text-muted text-right mt-2">
                <small>å…± <span id="totalCount">8</span> ç­†è³‡æ–™</small>
            </div>
        </div>
    </div>

    <!-- Bootstrap 4.6 JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // è¨­å®šé è¨­æ—¥æœŸç‚ºä»Šå¤©
        function setDefaultDates() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('startDate').value = today;
            document.getElementById('endDate').value = today;
        }

        // é é¢è¼‰å…¥æ™‚è¨­å®šé è¨­æ—¥æœŸ
        window.addEventListener('DOMContentLoaded', function() {
            setDefaultDates();
        });

        // è¡¨å–®æäº¤è™•ç†ï¼ˆç¯„ä¾‹ç”¨ï¼Œä¸å¯¦éš›åŸ·è¡ŒæŸ¥è©¢ï¼‰
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const chartNo = document.getElementById('chartNo').value;
            
            // æ¨¡æ“¬æŸ¥è©¢å‹•ä½œ
            alert('æŸ¥è©¢æ¢ä»¶ï¼š\n' + 
                  'é–‹å§‹æ—¥æœŸï¼š' + startDate + '\n' +
                  'çµæŸæ—¥æœŸï¼š' + endDate + '\n' +
                  'ç—…æ­·è™Ÿï¼š' + (chartNo || 'å…¨éƒ¨'));
            
            // å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œé€™è£¡æœƒç™¼é€ AJAX è«‹æ±‚åˆ°å¾Œç«¯
            console.log('æŸ¥è©¢åƒæ•¸:', { startDate, endDate, chartNo });
        });

        // é‡ç½®è¡¨å–®
        function resetForm() {
            document.getElementById('searchForm').reset();
            setDefaultDates();
            document.getElementById('chartNo').value = '';
        }

        // å…¨é¸/å–æ¶ˆå…¨é¸
        function toggleSelectAll(checkbox) {
            const checkboxes = document.querySelectorAll('.row-checkbox');
            checkboxes.forEach(cb => {
                cb.checked = checkbox.checked;
            });
        }

        // æ–°å¢é ç´„ï¼ˆç¯„ä¾‹ç”¨ï¼‰
        function addAppointment() {
            alert('é–‹å•Ÿæ–°å¢é ç´„è¦–çª—\nï¼ˆæ­¤ç‚ºç¯„ä¾‹æŒ‰éˆ•ï¼Œç„¡å¯¦éš›åŠŸèƒ½ï¼‰');
            // å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œé€™è£¡æœƒé–‹å•Ÿæ–°å¢é ç´„çš„å°è©±æ¡†æˆ–è·³è½‰åˆ°æ–°å¢é é¢
        }

        // æ‰¹æ¬¡æ›´æ–°ç‹€æ…‹
        function batchUpdate() {
            const selectedStatus = document.getElementById('batchStatus').value;
            const checkedBoxes = document.querySelectorAll('.row-checkbox:checked');
            
            if (checkedBoxes.length === 0) {
                alert('è«‹è‡³å°‘é¸æ“‡ä¸€ç­†è³‡æ–™');
                return;
            }
            
            if (!selectedStatus) {
                alert('è«‹é¸æ“‡è¦æ›´æ–°çš„ç‹€æ…‹');
                return;
            }
            
            // æ›´æ–°é¸ä¸­é …ç›®çš„ç‹€æ…‹é¡¯ç¤º
            let updatedCount = 0;
            checkedBoxes.forEach(checkbox => {
                const row = checkbox.closest('tr');
                const statusCell = row.querySelector('td:nth-child(6)');
                const badge = statusCell.querySelector('.status-badge');
                
                // ç§»é™¤èˆŠçš„ç‹€æ…‹class
                badge.classList.remove('status-pending', 'status-completed', 'status-cancelled');
                
                // æ ¹æ“šé¸æ“‡çš„ç‹€æ…‹æ›´æ–°
                let statusText = '';
                let statusClass = '';
                
                switch(selectedStatus) {
                    case 'pending':
                        statusText = 'æœªçœ‹è¨º';
                        statusClass = 'status-pending';
                        break;
                    case 'completed':
                        statusText = 'å®Œæˆçœ‹è¨º';
                        statusClass = 'status-completed';
                        break;
                    case 'cancelled':
                        statusText = 'å–æ¶ˆ';
                        statusClass = 'status-cancelled';
                        break;
                }
                
                badge.textContent = statusText;
                badge.classList.add(statusClass);
                checkbox.setAttribute('data-status', selectedStatus);
                updatedCount++;
            });
            
            alert('å·²æ›´æ–° ' + updatedCount + ' ç­†è³‡æ–™çš„ç‹€æ…‹');
            
            // å–æ¶ˆæ‰€æœ‰é¸å–
            document.getElementById('selectAll').checked = false;
            checkedBoxes.forEach(cb => cb.checked = false);
            
            // é‡ç½®ç‹€æ…‹é¸æ“‡å™¨
            document.getElementById('batchStatus').value = '';
            
            // å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œé€™è£¡æœƒç™¼é€ AJAX è«‹æ±‚åˆ°å¾Œç«¯æ›´æ–°è³‡æ–™åº«
            console.log('æ‰¹æ¬¡æ›´æ–°:', updatedCount + 'ç­†è³‡æ–™');
        }
    </script>
</body>
</html>